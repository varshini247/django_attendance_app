{% extends "base.html "%}
{% load static %}

<!-- <!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
        <link rel="stylesheet" type="text/css" href="{% static 'css/home.css' %}">
    <script src="{% static 'js/calculate.js' %}"></script>

    <title>home</title>
</head> -->
{% block links %}
<link rel="stylesheet" href="{% static 'css/home.css' %}">
<script src="{% static 'js/calculate.js' %}"></script>
{% endblock %}

<!-- <style>
        .ftco-section{
            padding: 7em 0;
        }
        .btnlink{
            background: #6a994e;
            
            border-radius:25px;
            padding: 1.5em;

        }
        .btnlink:hover{
            background : #90a955;
        }
        .btnlink a{
            color: #fcf5c7;
            text-decoration: none;
        }
        
        h2{
            color: #6a994e;
        }
        .form-group{
            margin: 6em;
        
        }
        label{
            display: block;
            margin-bottom: 0.5rem;
        }
        input, select, .item{
            width :600px;
            height: 45px;
            border-radius: 50px;
            -webkit-border-radius: 50px;
            -moz-border-radius: 50px;
            /* padding: 1px 4px; */
            
            
        }
        input:focus, select:focus{
            /* border-color: #90a955; */
            border: 2px solid #90a955;
            box-shadow: 0 0 5px #90a955;
            outline-offset: 0px;
            outline: none;
        }
        .labelh{
            font-size: 22px;
        }
        .result{
            /* background: #fefae0; */
            color: #43291f;
            /* border-radius: 15px; */
            font-size:21px;
            text-align: center ;
            /* width:350px;
            height: 80px; */
            display: flex;
            justify-content: center;
           
        }
    </style> -->



{% block content %}
<div class="bg" 
style=" background-color: #E6D72A;
height: 100vh">

<section class="ftco-section ">
    <div class="container">
       
        <div class="row justify-content-center">
            

            <div class="col-md-12 text-center mb-5">
                <h2 class="heading-section mt-5 "> Need help with tracking attendance? Calculate your attendance based on
                </h2>
            </div>
            <div class="w-100"></div>
            <div class="col text-center m-5">
                
                <!-- <button class="btnlink "> -->
                    <a class="btnlink" href="#classwise">Classes</a>
                <!-- </button> -->
            
            </div>
            <div class="col text-center m-5">
                <!-- <button class="btnlink"> -->
                    <a class="btnlink" href="#daywise">Days</a>
                <!-- </button> -->
            </div>
        </div>
    </div>
</div>
</section>
</div>
</div>

<section class="ftco-section one">
    <div class="row justify-content-center">
        <div class="classwise" id="classwise">
            <div class="contact-wrap w-100 p-md-4 p-4 c">
                <h3 class="text-center display-4 mb-4 p-3">Classwise</h3>
                <form action="" id="classform" onsubmit="return false;">
                    <div class="col-md-12">
                        <div class="form-group" class="labelh">
                            <label for="ac" class="labelh">Classes absent</label>
                            <input type="number" id="ac" class="px-4 py-1" name="absent_c" min="0"
                                onchange="calculate('classform')" />
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="form-group ">
                            <label for="tc" class="labelh"> Total classes</label>
                            <input type="number" id="tc" class="px-4 py-1" name="total_c" min="0"
                                onchange="calculate('classform')" />
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="form-group">
                            <div>
                                <label for="percent" class="labelh">Minimum percentage required</label>
                                <select name="percent" id="percent" class="px-4 py-1" onchange="calculate('classform')">
                                    <option value="">select</option>
                                    <option value="80">80%</option>
                                    <option value="75">75%</option>
                                    <option value="70">70%</option>
                                    <option value="65">65%</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="result "></div>
                    </div>
                </form>
            </div>
        </div>
    
</section>
<div  class="percent-wrapper"><div class="percent"></div></div>

<section class="ftco-section two">
    <div class="row justify-content-center">
        <div class="daywise" id="daywise">
        <div class="contact-wrap w-100 p-md-4 p-4 d">
            <h3 class="text-center display-4 mb-4 p-3">Daywise</h3>
            <form action="" id="dayform" onsubmit="return false;">
                <div class="col-md-12">
                    <div class="form-group" class="labelh">
                        <label for="ad" class="labelh">Days absent</label>
                        <input type="number" id="ad" class="px-4 py-1" name="absent_c" min="0"
                            onchange="calculate('dayform')" />
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="form-group">
                        <label for="twd" class="labelh"> Total working days</label>
                        <input type="number" id="twd" class="px-4 py-1" name="total_c" min="0"
                            onchange="calculate('dayform')" />
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="form-group">
                        <label for="percent1" class="labelh">Minimum percentage required</label>
                        <select name="percent" id="percent1" class="px-4 py-1" onchange="calculate('dayform')">
                            <option value="">select</option>
                            <option value="80">80%</option>
                            <option value="75">75%</option>
                            <option value="70">70%</option>
                            <option value="65">65%</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-12">
                <div class="result "></div>
                </div>
            </form>
        </div>
        </div>
    </div>
</section>
{% endblock %}



<!-- <script>
    function getPercentage(form) {
        // var form = document.forms['classform'];
        var percentage = form.elements['percent'].value;
        // console.log(percentage);
        return percentage;
    }
    function getTotalClasses(form) {
        // var form = document.forms['classform'];
        var totalClasses = form.elements['total_c'].value;
        // console.log(totalClasses);
        return totalClasses;
    }
    function getClassesAbsent(form) {
        // var form = document.forms['classform'];
        var classesAbsent = form.elements['absent_c'].value;
        return classesAbsent;
    }
    function calculate(formid) {
        var form = document.forms[formid];
        var total = parseInt(getTotalClasses(form));
        var absent = parseInt(getClassesAbsent(form));
        var reqPercent = parseInt(getPercentage(form));
        console.log(total, typeof (total), !(isNaN(total) == false));
        // console.log(reqPercent);
        if (isNaN(total) == false && isNaN(absent) == false && isNaN(reqPercent) == false) {
            var percent = computePercent(total, absent);
            var result = computeResult(total, absent, reqPercent);
            console.log("result is" + typeof (result), isNaN(result));
            if (isNaN(result)) {
                if (formid == "dayform") {
                    this.document.getElementsByClassName('result')[1].innerHTML = result + " "+ "more days";
                }
                else {
                    this.document.getElementsByClassName('result')[0].innerHTML = result+ " " + "more classes";
                }
            }
            else {
                if (formid == 'classform') {
                    this.document.getElementsByClassName('result')[0].innerHTML = "You have" +" "+ result + " "+ "classes left";
                }
                else {
                    this.document.getElementsByClassName('result')[1].innerHTML = "You have" + " "+ result + " "+"days left";
                }
            }
        }

    }
    function computePercent(value, tvalue) {
        return (value / tvalue) * 100;
    }
    function computeResult(total, absent, reqPercent) {
        var result = null;
        var classesLeft = total - (reqPercent * total) / 100;
        if (absent < classesLeft) {
            result = classesLeft - absent;
        }
        else if (absent == classesLeft) {
            result = 0;
        }
        else {
            console.log("hi");
            result = "You need to attend " + (absent - classesLeft);
        }
        return result
    }
</script> -->